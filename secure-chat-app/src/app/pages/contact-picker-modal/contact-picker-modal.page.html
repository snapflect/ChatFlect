<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-title>Share Contact</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="close()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
  <ion-toolbar>
    <ion-searchbar (ionInput)="onSearchChange($event)" placeholder="Search contacts..." animated="true"></ion-searchbar>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="ion-padding-top">
    <!-- Empty State -->
    <div *ngIf="groupedContacts.length === 0" class="empty-state ion-text-center ion-padding">
      <p class="text-muted">No contacts found.</p>
    </div>

    <!-- Grouped Contacts -->
    <ion-item-group *ngFor="let group of groupedContacts">
      <ion-item-divider sticky class="group-header">
        <ion-label>{{ group.letter }}</ion-label>
      </ion-item-divider>

      <ion-item *ngFor="let c of group.contacts" button (click)="selectContact(c)" class="contact-item">
        <ion-avatar slot="start" class="contact-avatar">
          <img [secureSrc]="c.photo_url || c.photo" onerror="this.src='assets/user.png'" />
        </ion-avatar>
        <ion-label>
          <h2 class="contact-name">{{ c.displayName }}</h2>
          <p class="contact-number">{{ c.short_note || c.phone_number }}</p>
        </ion-label>
      </ion-item>
    </ion-item-group>
  </div>
</ion-content>

<style>
  .group-header {
    --background: transparent;
    --color: var(--ion-color-medium);
    font-weight: 600;
    font-size: 0.9rem;
    margin-top: 10px;
  }
</style>