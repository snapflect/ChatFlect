<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/tabs/chats" color="medium"></ion-back-button>
    </ion-buttons>
    <ion-title class="gradient-text">Contacts</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="loadContacts()" class="icon-btn">
        <ion-icon name="refresh" color="secondary"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="ion-padding-top">
    <ion-list lines="none" class="bg-transparent">
      <!-- New Contact Action -->
      <ion-item button (click)="addContact()" class="contact-item">
        <ion-avatar slot="start" class="contact-avatar add-avatar">
          <ion-icon name="person-add" color="light"></ion-icon>
        </ion-avatar>
        <ion-label>
          <h2 class="contact-name">New Contact</h2>
        </ion-label>
      </ion-item>

      <!-- Invite Friend Action -->
      <ion-item button (click)="inviteFriend()" class="contact-item">
        <ion-avatar slot="start" class="contact-avatar invite-avatar">
          <ion-icon name="share-social" color="light"></ion-icon>
        </ion-avatar>
        <ion-label>
          <h2 class="contact-name">Invite Friends</h2>
        </ion-label>
      </ion-item>

      <ion-item *ngFor="let c of contacts" button (click)="startChat(c)" class="contact-item">
        <ion-avatar slot="start" class="contact-avatar">
          <img [src]="c.photo_url || c.avatar || 'https://gravatar.com/avatar?d=mp'" />
        </ion-avatar>
        <ion-label>
          <h2 class="contact-name">{{ c.displayName || c.username || c.first_name || 'Unknown' }} {{ (!c.displayName &&
            !c.username) ? (c.last_name || '') : '' }}</h2>
          <p class="contact-number">{{ c.short_note || c.phone_number }}</p>
        </ion-label>
        <ion-button slot="end" fill="clear" color="primary">
          <ion-icon name="chatbubble-ellipses-outline" slot="icon-only"></ion-icon>
        </ion-button>
      </ion-item>
    </ion-list>
  </div>
</ion-content>

<style>
  .add-avatar,
  .invite-avatar {
    background: var(--ion-color-secondary);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .invite-avatar {
    background: var(--ion-color-tertiary);
  }
</style>