<ion-header class="ion-no-border">
    <ion-toolbar>
        <ion-buttons slot="start">
            <ion-button (click)="goBack()" color="medium">
                <ion-icon name="arrow-back"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>Contact Info</ion-title>
        <ion-buttons slot="end">
            <ion-button>
                <ion-icon name="ellipsis-vertical"></ion-icon>
            </ion-button>
        </ion-buttons>
    </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="bg-light">

    <!-- Profile Header -->
    <div class="profile-header">
        <div class="avatar-container">
            <img [secureSrc]="user?.photo" class="profile-avatar">
        </div>
        <h2 class="profile-name">{{ user?.username || 'User' }}</h2>
        <p class="profile-number">{{ user?.phoneNumber || '+1 555 000 0000' }}</p>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <div class="action-btn">
                <ion-button fill="outline" shape="round" class="icon-btn">
                    <ion-icon name="call" slot="icon-only"></ion-icon>
                </ion-button>
                <span>Audio</span>
            </div>
            <div class="action-btn">
                <ion-button fill="outline" shape="round" class="icon-btn">
                    <ion-icon name="videocam" slot="icon-only"></ion-icon>
                </ion-button>
                <span>Video</span>
            </div>
            <div class="action-btn">
                <ion-button fill="outline" shape="round" class="icon-btn">
                    <ion-icon name="search" slot="icon-only"></ion-icon>
                </ion-button>
                <span>Search</span>
            </div>
        </div>
    </div>

    <div class="section-spacer"></div>

    <!-- Shared Media -->
    <ion-card class="media-card">
        <ion-item lines="none" detail="true">
            <ion-label>Media, Links, and Docs</ion-label>
            <span slot="end" class="media-count">{{ sharedMedia.length }}</span>
        </ion-item>

        <div class="media-gallery" *ngIf="sharedMedia.length > 0; else noMedia">
            <div class="media-scroller">
                <div class="media-thumb" *ngFor="let m of sharedMedia | slice:0:10">
                    <img [secureSrc]="getMediaThumbnail(m)" />
                    <div class="play-icon" *ngIf="m.type === 'video'">
                        <ion-icon name="play"></ion-icon>
                    </div>
                </div>
                <div class="view-all-btn" *ngIf="sharedMedia.length > 10">
                    <ion-icon name="arrow-forward"></ion-icon>
                </div>
            </div>
        </div>
        <ng-template #noMedia>
            <div class="no-media">
                <p>No media shared</p>
            </div>
        </ng-template>
    </ion-card>

    <div class="section-spacer"></div>

    <!-- Options -->
    <ion-list lines="full" class="options-list">
        <ion-item button detail="true">
            <ion-icon name="notifications-outline" slot="start"></ion-icon>
            <ion-label>Mute Notifications</ion-label>
        </ion-item>
        <ion-item button detail="true">
            <ion-icon name="image-outline" slot="start"></ion-icon>
            <ion-label>Media Visibility</ion-label>
        </ion-item>
        <ion-item button detail="true">
            <ion-icon name="star-outline" slot="start"></ion-icon>
            <ion-label>Starred Messages</ion-label>
        </ion-item>
        <ion-item button detail="true">
            <ion-icon name="lock-closed-outline" slot="start"></ion-icon>
            <ion-label>Encryption</ion-label>
            <ion-note slot="end">Messages are end-to-end encrypted.</ion-note>
        </ion-item>
    </ion-list>

    <div class="section-spacer"></div>

    <!-- Destructive Actions -->
    <ion-list lines="none" class="destructive-list">
        <ion-item button lines="none" class="text-danger">
            <ion-icon name="ban-outline" slot="start" color="danger"></ion-icon>
            <ion-label color="danger">Block {{ user?.username || 'User' }}</ion-label>
        </ion-item>
        <ion-item button lines="none" class="text-danger">
            <ion-icon name="thumbs-down-outline" slot="start" color="danger"></ion-icon>
            <ion-label color="danger">Report {{ user?.username || 'User' }}</ion-label>
        </ion-item>
    </ion-list>

    <div class="footer-spacer"></div>

</ion-content>